<div>
  <h1>Recipes</h1>

  <form (ngSubmit)="addRecipe()">
    <div>
      <label for="title">Title:</label>
      <input id="title" [(ngModel)]="newRecipe.title" name="title" required />
    </div>

    <div>
      <label for="description">Instructions:</label>
      <textarea id="description" [(ngModel)]="newRecipe.description" name="description" required></textarea>
    </div>

    <div>
      <h3>Ingredients:</h3>
      <div *ngFor="let ingredient of newRecipe.ingredients; let i = index">
        <input
          placeholder="Name"
          [(ngModel)]="ingredient.name"
          name="ingredientName{{ i }}"
          required
        />
        <input
          type="number"
          placeholder="Quantity"
          [(ngModel)]="ingredient.quantity"
          name="ingredientQuantity{{ i }}"
          required
        />
        <input
          placeholder="Quantity Type"
          [(ngModel)]="ingredient.quantityType"
          name="ingredientQuantityType{{ i }}"
          required
        />
        <button type="button" (click)="removeIngredient(i)">Remove</button>
      </div>
      <button type="button" (click)="addIngredient()">Add Ingredient</button>
    </div>

    <button type="submit">Add Recipe</button>
  </form>

  <ul>
    <li *ngFor="let recipe of recipes$ | async">
      <h3>{{ recipe.title }}</h3>
      <ul>
        <li *ngFor="let ingredient of recipe.ingredients">
          {{ ingredient.name }} - {{ ingredient.quantity }} {{ ingredient.quantityType }}
        </li>
      </ul>
      <p>{{ recipe.description }}</p>
      <button (click)="deleteRecipe(recipe.id)">Delete</button>
    </li>
  </ul>

  <button (click)="back()">Back</button>
</div>
